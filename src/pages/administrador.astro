---
import Admin from "@/layouts/Admin.astro"
import FechaActual from "@/components/FechaActual"
import { fetchEmpleados } from "@/lib/fetchEmpleados"
import RegistroAsistencia from "@/components/RegistroAsistencia"
import TablaEmpleadosPresentes from "@/components/TablaEmpleadosPresentes "

const { totalEmpleados, presentes, ausentes, jornadaCompletada } =
    await fetchEmpleados()
---

<Admin title="">
    <div class="card-container">
        <div class="card-section">
            <div class="card-header">
                <h2 class="card-title">Resumen de Hoy</h2>
                <div>
                    <FechaActual client:load />
                </div>
            </div>
            <div class="grid">
                <div class="stat-card stat-card--indigo">
                    <div class="stat-card-content">
                        <div class="stat-details">
                            <div class="stat-info">
                                <dl>
                                    <dt class="stat-title">Total Empleados</dt>
                                    <dd class="stat-number">
                                        {totalEmpleados}
                                    </dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="stat-card stat-card--green">
                    <div class="stat-card-content">
                        <div class="stat-details">
                            <div class="stat-info">
                                <dl>
                                    <dt class="stat-title">Presentes</dt>
                                    <dd class="stat-number">{presentes}</dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="stat-card stat-card--red">
                    <div class="stat-card-content">
                        <div class="stat-details">
                            <div class="stat-info">
                                <dl>
                                    <dt class="stat-title">Ausentes</dt>
                                    <dd class="stat-number">{ausentes}</dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="stat-card stat-card--blue">
                    <div class="stat-card-content">
                        <div class="stat-details">
                            <div class="stat-info">
                                <dl>
                                    <dt class="stat-title">
                                        Jornada Completada
                                    </dt>
                                    <dd class="stat-number">
                                        {jornadaCompletada}
                                    </dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-footer">
            <div>
                <h3>Registrar Asistencia</h3>
                <RegistroAsistencia client:load />
            </div>
        </div>
        <TablaEmpleadosPresentes client:load />
    </div>
</Admin>
<style>
    .card-container {
        background-color: white;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        border-radius: 0.5rem;
        border: 1px solid #e5e7eb;
    }

    .card-section {
        padding: 1rem 1.5rem;
    }

    .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    .card-title {
        font-size: 1.125rem;
        font-weight: 500;
        color: #111827;
    }

    .grid {
        display: grid;
        grid-template-columns: repeat(1, 1fr);
        gap: 1.25rem;
    }

    @media (min-width: 640px) {
        .grid {
            grid-template-columns: repeat(3, 1fr);
        }
    }

    .stat-card {
        background-color: #f3f4f6;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        border-radius: 0.5rem;
    }

    .stat-card--indigo {
        background-color: #e0e7ff;
    }

    .stat-card--green {
        background-color: #d1fae5;
    }

    .stat-card--red {
        background-color: #fee2e2;
    }

    .stat-card-content {
        padding: 1.25rem;
    }

    .stat-details {
        display: flex;
        align-items: center;
    }

    .stat-title {
        font-size: 0.875rem;
        font-weight: 500;
        color: #6b7280;
        white-space: nowrap;
    }

    .stat-number {
        font-size: 1.875rem;
        font-weight: 600;
        color: #111827;
    }

    .card-footer {
        padding: 1rem 1.5rem;
        display: flex;
        justify-content: space-between;
    }

    .button {
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 0.375rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: white;
        background-color: #6366f1;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        cursor: pointer;
        transition: background-color 0.2s;
    }

    .button:hover {
        background-color: #4f46e5;
    }

    .button:focus {
        outline: 2px solid transparent;
        outline-offset: 2px;
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.5);
    }
    .stat-card--blue {
        background-color: #bfdbfe;
    }
</style>
